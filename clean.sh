#!/data/data/com.termux/files/usr/bin/bash

# === –¶–í–ï–¢–ê –î–õ–Ø –í–´–í–û–î–ê ===
GREEN="\033[1;32m"
RED="\033[1;31m"
BLUE="\033[1;34m"
YELLOW="\033[1;33m"
RESET="\033[0m"

# === –§–£–ù–ö–¶–ò–Ø: –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ä–∞–º–∫–æ–π ===
frame() {
  echo -e "${BLUE}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó${RESET}"
  echo -e "${BLUE}‚ïë ${YELLOW}$1${RESET}"
  echo -e "${BLUE}‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${RESET}"
}

# === –§–£–ù–ö–¶–ò–Ø: –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ ===
error() {
  echo -e "${RED}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
  echo -e "‚ïë ‚ùå –û–®–ò–ë–ö–ê: $1"
  echo -e "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù${RESET}"
}

# === –ù–ê–ß–ê–õ–û –†–ê–ë–û–¢–´ ===
clear
frame "üßπ –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ Termux"

# === 1. –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ APT ===
frame "üßº –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ø–∞–∫–µ—Ç–æ–≤ APT..."
if ! apt clean; then
  error "–ù–µ —É–¥–∞–ª–æ—Å—å –æ—á–∏—Å—Ç–∏—Ç—å apt-–∫—ç—à"
fi

# === 2. –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ ===
frame "üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤..."
if ! apt autoremove -y; then
  error "–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å autoremove"
fi

# === 3. –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ ~/.cache ===
frame "üìÇ –û—á–∏—Å—Ç–∫–∞ –ø–∞–ø–∫–∏ ~/.cache..."
[[ -d ~/.cache ]] && rm -rf ~/.cache/*

# === 4. –û—á–∏—Å—Ç–∫–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∫—ç—à–∞ Termux ===
frame "üìÇ –û—á–∏—Å—Ç–∫–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∫—ç—à–∞ Termux..."
[[ -d /data/data/com.termux/cache ]] && rm -rf /data/data/com.termux/cache/*

# === 5. –£–¥–∞–ª–µ–Ω–∏–µ –º—É—Å–æ—Ä–∞ –Ω–∞ SD-–∫–∞—Ä—Ç–µ ===
frame "üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ /sdcard/.Trash..."
rm -rf /sdcard/.Trash/* 2>/dev/null

# === 6. –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥ Bash –∏ Zsh ===
frame "üìú –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥..."
rm -f ~/.bash_history ~/.zsh_history

# === 7. –£–¥–∞–ª–µ–Ω–∏–µ lock- –∏ log-—Ñ–∞–π–ª–æ–≤ APT ===
frame "üîê –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –ª–æ–≥–æ–≤..."
rm -f /data/data/com.termux/files/usr/var/lib/apt/lists/lock
rm -f /data/data/com.termux/files/usr/var/cache/apt/archives/lock
rm -f /data/data/com.termux/files/usr/var/lib/dpkg/lock

# === 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç–æ–≥–æ –º–µ—Å—Ç–∞ ===
frame "üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:"
df -h | grep -E '^(/|/data|/dev|/sdcard)'

# === –ó–ê–í–ï–†–®–ï–ù–ò–ï ===
frame "‚úÖ –û—á–∏—Å—Ç–∫–∞ Termux –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"